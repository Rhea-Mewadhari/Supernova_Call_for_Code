{% extends "dashboard.html" %}
{% block content %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Get the element that displays the welcome message
        var welcomeMessageElement = document.getElementById('welcome-message');

        // Get the username text from the element
        var username = welcomeMessageElement.textContent.replace('Welcome, ', '').trim();

        // Capitalize the first letter of each word in the username
        var formattedUsername = username.split(' ')
                                        .map(word => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())
                                        .join(' ');

        // Update the welcome message with the properly formatted username
        welcomeMessageElement.textContent = 'Welcome, ' + formattedUsername;
    });
    function startNewChat() {
        window.location.href = '/newchat';// Replace '/new_chat' with the URL for your new chat page
    }
</script>
<script>
   
    window.watsonAssistantChatOptions = {
      integrationID: "2471a3ab-6e0b-4be6-a172-3304f884337b", // The ID of this integration.
      region: "us-south", // The region your integration is hosted in.
      serviceInstanceID: "0c9fd8e9-11cd-4ce3-9bd8-30f3209b5ff9",
      showRestartButton: true, 
// The ID of your service instance.
      onLoad: async (instance) => {
        const isMobile = window.innerWidth <= 600; // Adjust this value based on your needs
    const baseHeight = isMobile ? '500px' : '550px'; // Set height based on mobile or desktop
    const baseWidth = isMobile ? '300px' : '400px'; // Adjust width as needed

    instance.updateCSSVariables({
        'BASE-height': baseHeight,
        'BASE-width': baseWidth,
        // Adjust distance from the right if needed
    });
        await instance.render();
      }
    };
    setTimeout(function(){
      const t = document.createElement('script');
      t.src = "https://web-chat.global.assistant.watson.appdomain.cloud/versions/" + 
              (window.watsonAssistantChatOptions.clientVersion || 'latest') + 
              "/WatsonAssistantChatEntry.js";
      document.head.appendChild(t);
    }, 0); // Added a delay of 0 ms to ensure it runs asynchronously
  </script>
<div class="container-fluid" data-aos="fade-in">
    <!-- Horizontal Line with Username -->
    <h4 id="welcome-message" style="color:#198754"><b>Welcome, {{ user.username }}</b></h4>
    <hr class="my-4" style="border-top: 5px solid #198754; z-index: inherit;">

    <!-- Animation and Welcome Text -->
    <div class="row justify-content-center text-center">
        <div class="col-sm-10 px-4 py-4">
            <div class="d-flex flex-column align-items-center" style="width: 20%; z-index: 100; margin: 0 auto;">
                <lottie-player src="{{ url_for('static', filename='logo/wink.json') }}" background="transparent" speed="1" loop autoplay></lottie-player>
            </div>

            <p style="font-size: larger; color:#198754;"><b>Welcome, I am Vita. I help in the diagnosis of diseases. Please use the button below to chat with me.</b></p>

            <button class="btn btn-outline-success mt-3" onclick="startNewChat()">New Chat <i class="bx bx-plus-medical"></i></button>
        </div>
    </div>
</div>




{% endblock %}